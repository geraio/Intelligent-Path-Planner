# 智能路径规划系统

本项目实现了一个基于多种算法的智能路径规划系统，包含BFS、Floyd、Q-learning和SPFA四种算法，并通过PyQt5提供了图形用户界面。

## 依赖项

- Python 3.x
- PyQt5
- NumPy
- Matplotlib
- Pandas

## 使用说明

python main.py

## 文件说明

### 1. main.py

**算法**: 无（主控制界面）

**功能**: 
- 提供图形用户界面(GUI)用于控制各种路径规划算法
- 集成BFS、Floyd、Q-learning和SPFA算法的调用接口
- 显示算法运行结果和可视化路径

**参数设置**:
- 通过GUI界面设置各算法的参数
- 包含矩阵输入、起点终点设置、惩罚系数等参数
- 提供运行按钮触发算法执行

**逻辑**:
1. 创建PyQt5主窗口和界面布局
2. 为每种算法创建独立的标签页
3. 收集用户输入的参数
4. 调用对应算法并显示结果

### 2. BFS.py

**算法原理**:
广度优先搜索通过逐层遍历节点来寻找最短路径，采用队列数据结构实现。数学表达式为：
```
d[v] = d[u] + 1 （u为前驱节点）
```

**时间复杂度**: O(V+E)（V为顶点数，E为边数）

**适用场景**:
- 无权图最短路径
- 状态空间遍历
- 连通性检测

**实现步骤**:
1. 初始化队列和访问标记
2. 将起点入队并标记
3. 循环出队并探索相邻节点
4. 记录路径并可视化

**功能**:
- 在矩阵中寻找从起点到终点的最短路径
- 支持可视化搜索过程和结果
- 可处理负权边和防止路径回退

**参数设置**:
- `matrix`: 输入矩阵(二维数组)
- `start`: 起点坐标(x,y)
- `end`: 终点坐标(x,y)
- `allow_revisit`: 是否允许重复访问节点
- `prevent_back_and_forth`: 是否防止反复横跳
- `penalty`: 惩罚系数(默认6)
- `gui_mode`: 是否在GUI模式下运行

**逻辑**:
1. 对输入矩阵应用惩罚系数转换
2. 使用BFS算法探索所有可能路径
3. 记录路径历史用于可视化
4. 返回最短路径和可视化结果

### 3. Floyd.py

**算法**: Floyd-Warshall算法

**功能**:
- 计算图中所有节点对之间的最短路径
- 可处理负权边
- 检测负权环
- 可视化最短路径

**参数设置**:
- `matrix`: 输入矩阵(二维数组)
- `start`: 起点坐标(x,y)
- `end`: 终点坐标(x,y)
- `orrM`: 原始矩阵(用于显示)
- `gui_mode`: 是否在GUI模式下运行

**逻辑**:
1. 初始化距离矩阵和前驱矩阵
2. 三重循环更新最短路径
3. 检测负权环
4. 重建最短路径
5. 返回路径距离和可视化结果

### 4. Qlearn.py

**算法原理**:
基于Q-learning的强化学习算法，更新规则：
```
Q(s,a) = Q(s,a) + α[r + γmaxQ(s',a') - Q(s,a)]
```
其中α为学习率，γ为折扣因子

**探索策略**:
- ε-greedy平衡探索与利用
- 动态衰减探索率

**收敛条件**:
- Q值变化小于阈值
- 达到最大迭代次数

**功能**:
- 使用强化学习寻找最优路径
- 可视化学习过程和最终路径
- 支持多种探索策略

**参数设置**:
- `func`: 算法类型(SA/QL/EXP)
- `way`: 选择方式(Q/S/R)
- `wall`: 边界处理(Not/Try)
- `back`: 回溯处理(Not/Never/Allow)
- `Video`: 是否显示动画(Yes/Not)
- `iterations`: 迭代次数
- `subtract`: 奖励减数(默认6)

**逻辑**:
1. 初始化Q表
2. 通过ε-greedy策略选择动作
3. 更新Q值
4. 记录学习过程
5. 提取最优路径
6. 可视化结果

### 5. SPFA.py

**算法原理**:
队列优化的Bellman-Ford算法，通过松弛操作更新距离：
```
if d[u] + w(u,v) < d[v]:
    d[v] = d[u] + w(u,v)
```

**时间复杂度**:
- 平均情况O(E)
- 最坏情况O(VE)

**优势**:
- 高效处理稀疏图
- 自动检测负权环
- 支持动态权重更新

**功能**:
- 寻找单源最短路径
- 检测负权环
- 可视化路径和负权环

**参数设置**:
- `matrix`: 输入矩阵(二维数组)
- `start`: 起点坐标(x,y)
- `end`: 终点坐标(x,y)
- `orrM`: 原始矩阵(用于显示)
- `prevent_back_and_forth`: 是否防止反复横跳
- `gui_mode`: 是否在GUI模式下运行

**逻辑**:
1. 初始化距离和前驱数组
2. 使用队列优化Bellman-Ford算法
3. 检测负权环
4. 重建最短路径
5. 返回路径距离和可视化结果

## 使用说明

1. 运行`main.py`启动图形界面
2. 选择算法标签页
3. 设置相应参数
4. 点击"运行"按钮执行算法
5. 查看结果输出和可视化图像